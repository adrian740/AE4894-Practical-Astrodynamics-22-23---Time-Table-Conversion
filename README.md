# AE4894 Practical Astrodynamics Downloader

The code in this repository will allow you to download the leap-second and time correction tables from https://maia.usno.navy.mil/products/daily.htm and https://maia.usno.navy.mil/products/leap-second.

These tables are updated frequently so it is suggested to download the most recent data using the following command:

    python time_conversion_downloader.py -download_table both

To preview the first five lines of the downloaded data, one can use:

    python time_conversion_downloader.py --preview

## Showing leap-second corrections
To show the number of seconds GPS time is ahead of UTC time, provide the `--show_leap` parameter with the associated Julian date. 

    python time_conversion_downloader.py --show_leap 2439126.5

### Leap Second Usage

In code, the function `get_offset_GPS` will return the leap seconds (as a float) for a given array (use `read_file(filename, UT1=False)` and pass the returned array as the first parameter) and the Julian Date as the second parameter.

The `read_file(filename, UT1=False)` takes as parameters filename (of the downloaded table) and whether the data corresponds to UT1 or leap second correction.

### Example

    download_tables('tables', 'tai-utc.dat')
    GPS_correction_table = read_file('tables/tai-utc.dat', UT1=False)
    JD = 2439127.5
    offset = get_offset_GPS(GPS_correction_table, JD)
    print(f'For {JD=}, the GPS leap-second correction offset is {offset}[s]')

Keep in mind provisions should be taken not to download the data tables on every run.

## Showing time correction
To show the time difference between universal time and UTC, use`--show_time` with a Modified Julian Date as parameter.

    python time_conversion_downloader.py --show_time 59714.00

### UT1 Usage
To obtain the time difference between UT1 and UTC, the function `get_offset_UT1` can be used, which will return the number of seconds difference (as a float). The first parameter is the correction table (generated by `read_file(filename, UT1=True)`, see [Leap Second Usage](#leap-second-usage) and the second is the Modified Julian Date.

### Example

    download_tables('tables', 'finals.daily.extended')
    DUT1_correction_table = read_file('tables/finals.daily.extended')
    MJD = 59714.00
    offset = get_offset_UT1(DUT1_correction_table, MJD)
    print(f'For {MJD=}, the UT1 correction offset is {offset}[s]')

Keep in mind provisions should be taken not to download the data tables on every run.

## Final Notes
If you end up using this implementation, please let me know through the Brightspace forums.

